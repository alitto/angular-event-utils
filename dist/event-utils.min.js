angular.module("eventUtils",[]),angular.module("eventUtils").directive("evAs",["$eventUtils",function(a){return{restrict:"A",link:function(b,c,d,e){a.attachEventHandlerReplacement(c,b,d.evAs,!1)}}}]),angular.module("eventUtils").directive("evEcho",["$eventUtils",function(a){return{restrict:"A",link:function(b,c,d,e){a.attachEventHandlerEcho(c,b,d.evEcho)}}}]),angular.module("eventUtils").factory("$eventUtils",[function(){var a={EVENT_SEPARATOR:",",OPTION_SEPARATOR:";",KEY_EXPR_SEPARATOR:":",debugEnabled:!1,domEvents:{click:{type:"mouse"},dblclick:{type:"mouse"},mousedown:{type:"mouse"},mouseup:{type:"mouse"},hover:{type:"mouse"},mouseenter:{type:"mouse"},mouseleave:{type:"mouse"},mousemove:{type:"mouse"},mouseout:{type:"mouse"},mouseover:{type:"mouse"},submit:{type:"form",tags:["FORM"]},focus:{type:"form"},blur:{type:"form"},change:{type:"form",tags:["INPUT","TEXTAREA","SELECT"]},focusin:{type:"form"},focusout:{type:"form"},select:{type:"form",tags:["INPUT","TEXTAREA"]},keydown:{type:"keyboard"},keyup:{type:"keyboard"},keypress:{type:"keyboard"},scroll:{type:"browser"},resize:{type:"window",elems:[window]},load:{type:"resource",tags:["IMG","SCRIPT","LINK","EMBED","AUDIO","VIDEO","FRAME","IFRAME"],elems:[window]},error:{type:"resource",tags:["IMG","SCRIPT","LINK","EMBED","AUDIO","VIDEO","FRAME","IFRAME"],elems:[window]},ready:{type:"document",elems:[window.document]}}};return a.attachEventHandlerActions=function(a,b,c){var d=this.parseOptions(c,b),e={};angular.forEach(d,function(a,c){e[c]=function(c,d,e){b.$eval(a,{$event:c,$data:d.length>0?d[0]:void 0,$args:d}),e&&b.$apply()}}),this._attachEventHandlers(a,b,e)},a.attachEventHandlerReplacement=function(a,b,c,d){var e=this.parseOptions(c,b),f=this,g={};angular.forEach(e,function(c,e){g[e]=function(g,h,i){var j=f.evalAsArray(b,c,{$event:g,$data:h.length>0?h[0]:null,$args:h});return 1===j.length&&(j=j.concat(h)),d&&(g.stopPropagation&&g.stopPropagation(),g.preventDefault&&g.preventDefault()),i||e!==j[0]?(i?(b.$emit.apply(b,j),f.debug('Replaced DOM event "%s" with emitted event "%s" in element',e,j[0],a[0])):f.isChildScope(b,g.targetScope)?(b.$broadcast.apply(b,j),f.debug('Replaced scope event "%s" with broadcasted event "%s" in element',e,j[0],a[0])):(b.$emit.apply(b,j),f.debug('Replaced scope event "%s" with emitted event "%s" in element',e,j[0],a[0])),void b.$apply()):console.error('Attempting to replace event "%s" with an event of the same name ("%s") in element',e,j[0],a[0])}}),this._attachEventHandlers(a,b,g)},a.attachEventHandlerEcho=function(a,b,c){var d=(c+"").split(","),e=this;angular.forEach(d,function(a){a=a.trim(),a&&b.$on(a,function(a){for(var c=[],d=1;d<arguments.length;d++)c.push(arguments[d]);if(e.isChildScope(a.targetScope,b)){var f=b.$$childHead;do f&&(e.isChildScope(a.targetScope,f)||(f.$broadcast.apply(f,[a.name].concat(c)),e.debug("Echo event %s to scope",a.name,f)),f=f.$$nextSibling);while(f)}})})},a._attachEventHandlers=function(a,b,c){var d=this;angular.forEach(c,function(c,e){d._attachEventHandler(a,b,e,c)})},a._attachEventHandler=function(a,b,c,d){c=c.trim(),this.isDomEvent(c,a[0])?a.on(c,function(a){for(var b=[],c=1;c<arguments.length;c++)b.push(arguments[c]);d(a,b,!0)}):b.$on(c,function(a){for(var b=[],c=1;c<arguments.length;c++)b.push(arguments[c]);d(a,b,!1)})},a.parseOptions=function(a,b){var c={},d=this.splitUnescaped(a,this.OPTION_SEPARATOR),e=this,f=e.OPTION_SEPARATOR+e.KEY_EXPR_SEPARATOR;return angular.forEach(d,function(a){if(a){var d=e.splitFirstUnescaped(a,e.KEY_EXPR_SEPARATOR),g=e.unescapeChars(d[0],f),h=e.evalAsArray(b,g),i=d.length>1?e.unescapeChars(d[1],f):null;angular.forEach(h,function(a){c[a]=i})}}),c},a.evalAsArray=function(a,b,c){return a.$eval("["+b+"]",c)},a.isChildScope=function(a,b){return a&&(a.$parent===b||this.isChildScope(a.$parent,b))?!0:!1},a.isDomEvent=function(a,b){var c=this.domEvents[a];return"undefined"!=typeof c?c.tags?-1!==c.tags.indexOf(b.tagName):c.elems?-1!==c.elems.indexOf(b):!0:!1},a.splitUnescaped=function(a,b){return(a||"").replace(new RegExp("([^\\\\])"+b,"g"),"$1$1"+b).split(new RegExp("[^\\\\]"+b))},a.splitFirstUnescaped=function(a,b){var c=this.splitUnescaped(a,b);return c.length>2?[c[0]].concat(c.slice(1).join(b)):c},a.unescapeChars=function(a,b){for(var c=null,d=0;d<b.length;d++)c=b.charAt(d),a=a.replace(new RegExp("\\\\"+c,"g"),c);return a},a.debug=function(){this.debugEnabled&&console.debug.apply(console,arguments)},a}]),angular.module("eventUtils").directive("evInit",["$eventUtils",function(a){return{priority:Number.MAX_SAFE_INTEGER,restrict:"A",link:function(b,c,d,e){var f=a.parseOptions(d.evInit,b);angular.forEach(f,function(c,d){var e=a.evalAsArray(b,c);b.$broadcast.apply(b,[d].concat(e))})}}}]),angular.module("eventUtils").directive("evOn",["$eventUtils",function(a){return{restrict:"A",link:function(b,c,d,e){a.attachEventHandlerActions(c,b,d.evOn)}}}]),angular.module("eventUtils").directive("evReplace",["$eventUtils",function(a){return{restrict:"A",link:function(b,c,d,e){a.attachEventHandlerReplacement(c,b,d.evReplace,!0)}}}]);